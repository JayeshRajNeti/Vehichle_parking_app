{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<nav class="navbar">
    <div class="navdiv">
        <ul>
            <li><a href="">Home</a></li>
            <li><a href="">Users</a></li>
            <li><a href="">Search</a></li>
            <li><a href="">Summary</a></li>
            <li><a href="/logout">Logout</a></li>
            <li><a href="">Edit Profile</a></li>
        </ul>
    </div>
</nav>
<div class="dashboard-content">
    <h1>Welcome, {{usrname}}</h1>
    <p>Welcome to the admin dashboard. Use the navigation bar to access different sections.</p>

    <form method="GET" action="{{ url_for('admin') }}">
        <input type="text" name="search" placeholder="Search by location" value="{{ search_query }}">
        <input type="submit" value="Search">
    </form>

    <h2>Parking Lots</h2>
    <a href="{{ url_for('create_lot') }}" style="display:inline-block; margin-bottom: 10px; padding: 8px 12px; background-color: #4CAF50; color: white; text-decoration: none; border-radius: 4px;">Create Lot</a>
    {% if parkinglots %}
    <table border="1" cellpadding="5" cellspacing="0">
        <thead>
            <tr>
                <th>Location</th>
                <th>Address</th>
                <th>Pincode</th>
                <th>Price</th>
                <th>Spots</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for lot in parkinglots %}
            <tr>
                <td>{{ lot.location }}</td>
                <td>{{ lot.address }}</td>
                <td>{{ lot.pincode }}</td>
                <td>{{ lot.price }}</td>
                <td>{{ lot.spots }}</td>
                <td>
                    <a href="{{ url_for('update_lot', lotid=lot.lotid) }}">Update</a>
                    <form method="POST" action="{{ url_for('delete_lot', lotid=lot.lotid) }}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this parking lot?');">
                        <button type="submit">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No parking lots found.</p>
    {% endif %}
</div>
{% endblock %}
